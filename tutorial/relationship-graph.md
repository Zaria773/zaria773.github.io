# 关系图

这里介绍关系图的节点操作、连线配置等功能。

## 视频教程

<video controls width="100%" preload="metadata">
  <source src="/videos/relationship-graph.mp4" type="video/mp4">
  您的浏览器不支持 video 标签。
</video>

## 自动解析规则

关系图会自动扫描符合以下命名规则的表格数据：

### 1. 表格识别

| 表格类型 | 表名关键词（包含其一即可） | 必需列名（包含其一即可） |
|----------|-------------------------|-------------------------|
| **人物表** | `人物`, `角色`, `npc`, `character`, `主角` | `姓名`, `name`, `名称`, `角色名` |
| **关系表** | `关系`, `relationship`, `relation` | `source/源`, `target/目标` |
| **势力表** | `势力`, `faction`, `组织`, `阵营` | `名称`, `name`, `势力名` |

### 2. 列名识别

| 数据类型 | 对应列名关键词（包含其一即可） | 说明 |
|----------|-----------------------------|------|
| **人际关系** | `人际关系`, `关系`, `relationship` | 位于人物表中，用于解析内嵌关系 |
| **势力归属** | `所属`, `势力`, `阵营`, `身份`, `职业` | 位于人物表中，用于解析角色所属势力 |
| **源节点** | `source`, `源`, `主体`, `from` | 位于关系表中 |
| **目标节点** | `target`, `目标`, `客体`, `to` | 位于关系表中 |
| **关系词** | `关系`, `relation`, `关系词` | 位于关系表中 |
| **备注** | `备注`, `note`, `说明` | 位于关系表中 |

## 匹配规则自查

如果你的关系解析不正确，请检查是否符合以下格式：

**通用规则**（在人物表的“人际关系”列或势力表中均可使用）：

| 模式 | 格式 | 示例 | 解析结果 |
|------|------|------|----------|
| **标准格式** | `{目标}的{关系}` | 小红的哥哥 | 目标：小红，关系：哥哥 |
| **多目标** | `{A}、{B}的{关系}` | 小明、小红的朋友 | 目标：[小明, 小红]，关系：朋友 |
| **多关系** | `{目标}的{关系A}、{关系B}` | 小红的朋友、同学 | 目标：小红，关系：[朋友, 同学] |
| **混合模式** | `{目标}：{关系A}、{关系B}` | 小红：朋友、同学 | 目标：小红，关系：[朋友, 同学] |
| **双向模式** | `{A}与{B}的{关系}` | 我与小红的朋友 | 目标：[我, 小红]，关系：朋友 |
| **备注模式** | `{目标}的{关系}（{备注}）` | 小明的死对头（暗中） | 目标：小明，关系：死对头，备注：暗中 |
| **势力关系** | `与{势力}{关系}` | 与胜和敌对 | 目标：胜和，关系：敌对 |
| **冒号格式** | `{目标}：{关系}` | 藏剑山庄：盟友 | 目标：藏剑山庄，关系：盟友 |
| **反向冒号** | `{关系}：{目标}` | 盟友：藏剑山庄 | 目标：藏剑山庄，关系：盟友（需开启智能识别） |

## 关系类型与颜色

关系图会自动根据关系词判断关系类型，并赋予相应的颜色。优先级：S > A > E > D > B > C

| 类型 | 级别 | 颜色 | 匹配关键词 |
|------|------|------|------------|
| 💗 **爱/沉迷** | S | 粉红 #E91E63 | 恋, 男友, 女友, 爱, 暧昧, 情人, 伴侣, 老婆, 老公, 丈夫, 妻子, 粉丝, 迷, 倾心, 心上人 |
| 💙 **亲属** | A | 蓝 #2196F3 | 父, 母, 爹, 娘, 妈, 爸, 兄, 哥, 弟, 姐, 妹, 爷, 奶, 叔, 姑, 舅, 姨, 亲, 族, 祖, 儿, 女, 孙 |
| 💚 **师/友/同伴** | B | 绿 #4CAF50 | 友, 盟, 知己, 故交, 青梅竹马, 发小, 闺蜜, 死党, 伙, 同窗, 师, 弟子, 学生, 队友, 搭档, 同伴, 同门, 徒, 教官, 学徒, 向导, 哨兵 |
| ⚪ **社会关系** | C | 灰 #9E9E9E | 同事, 邻居, 舍友, 室友, 顾客, 客户, 上司, 下属, 同学, 路人, 熟人, 认识, 相识, 同乡, 老乡, 房东, 租客, 店员, 老板, 员工, 主管, 经理, 助手, 秘书, 管家, 仆人, 侍从, 护卫, 保镖 |
| 🟡 **利益关系** | D | 橙 #FF9800 | 合作, 雇佣, 交易, 债务, 炮友, 利用, 工具人, 棋子, 操控, 傀儡, 买卖, 债主, 欠债, 商业, 合伙, 投资, 赞助, 金主, 资助, 包养, 契约, 协议 |
| 🔴 **敌对关系** | E | 红 #F44336 | 仇, 敌, 死, 对手, 竞争, 仇敌, 死敌, 宿敌, 威胁, 敌对, 仇人, 仇家, 敌人, 对头, 冤家, 杀父, 杀母, 血仇, 深仇, 世仇, 夙敌, 劲敌, 强敌, 死对头, 眼中钉, 宿主, 夺舍, 寄生 |
| 🟣 **复杂/未知** | ? | 紫 #9C27B0 | 当正面关系(S/A/B)和敌对关系(E)同时存在时自动判定 |

### 线条样式

| 样式 | 说明 | 触发关键词 |
|------|------|------------|
| **实线** | 默认样式，表示当前直接的关系 | - |
| **虚线** ┄ | 过往/隐藏关系 | 过去, 过往, 从前, 曾经, 曾, 前, 原, 故, 昔, 已故, 已逝, 前任, 旧, 暗, 秘, 隐, 伪, 假, 表面, 疑, 可能, 潜在, 疑似 |
